# Smart Contact RFC

## Approver(s)

Name | Email | Status
--- | --- | ---
Rex | |
Mike | |
Victor | |
Jacky | |
Matt | |
Dustin | |

## Abstract
Work out the overall architecture and and featutes needed for the first implementation of the Decentralized Machine Learning protocol smart contracts.

## (Proposed) Architecture
Utilize an external storage contract and a hub and spoke toplogy to create modular and upgradeable smart contracts with a permanent data store.

## (Proposed) Implementation
Contracts
1) DmlBase - Contains interface for DML Storage and modifier functions for checking if address has certain roles
2) DmlExternalStorage - primary persistent storage for DML smart contracts.  All primative types are stored as mappings with bytes32 keys that are hashes of the name space and value being stored, and primative data types as values. This allows for one mapping to hold the values for several differet functions and use cases.  The contract has internal functions for setting, getting, and deleting values in mappings that can be called by other DML contracts registered with the store.
3) DmlMarktplace
- Initializes + changes the Bountry Factory address
- Allows for purchasing/transferring of DML Tokens
4) BountyFactory - Creates and tracks Bounty contracts
5) Bounty
- stores - creator, market, and token
- stores - name, prize, createdAt, winners, and participants
- Stores Status - initialized, enrollment start and end, bounty start and end, completed, paused, canceled
- Returns status
- Allows participants to join
- Update/Change - creator, bounty, name, prizes
- Start/Stop Enrollment
- Start/Stop Bounty
- Updates winners
- Pays out winners
- Transfer tokens
6) DmlUpgrade - takes care of upgrading contacts if they need updated functionality, or have bugs. It can also add new contracts if needed.


## Test cases
Unit tests can be written by first compling and deploying the smart contracts to a local Ganche and then interacting with them via Web3.

## Deployment
Smart contracts can be deployed to a local test network for development and then to oe of the Ethereum test networks for beta testing and finally to the main ethereum network.

## Analytics
This section is reserved for product features.  Usually, answers to these questions can be found in a product spec document so it can be linked here.
What is a “successful” launch? 
What user actions are we tracking?

## Experiments
This section is reserved for product features.  Usually, answers to these questions can be found in a product spec document so it can be linked here.
Are we rolling out to specific countries? What % rollout?
What’s the experiment name?
How long is the experiment running for?

## Monitoring
Do we have sufficient logging for sad cases?
Link to Grafana dashboard
